= Using Operators and Decision Constructs
:toc:
:toc-title: Содержание
:toclevels: 3

== Назначение

Тема "Using Operators and Decision Constructs" является одной из ключевых для экзамена OCA и покрывает операторы Java и конструкции принятия решений.
Понимание арифметических, логических операторов и операторов сравнения, а также конструкций `if`, `switch` и тернарного оператора критически важно для успешной работы с Java.
Эта тема используется практически во всех программах и является основой для написания логики приложений.

== Теория

=== Арифметические операторы

Java предоставляет полный набор арифметических операторов для выполнения математических операций:

* **Сложение (+)** - складывает два операнда
* **Вычитание (-)** - вычитает второй операнд из первого
* **Умножение (*)** - умножает два операнда
* **Деление (/)** - делит первый операнд на второй
* **Остаток от деления (%)** - возвращает остаток от деления

**Особенности деления:**

* Целочисленное деление отбрасывает дробную часть
* Деление на ноль целых чисел вызывает `ArithmeticException`
* Деление чисел с плавающей точкой на ноль возвращает `Infinity` или `NaN`

**Приоритет операторов:**

. Унарные операторы: `+`, `-`, `++`, `--`
. Мультипликативные: `*`, `/`, `%`
. Аддитивные: `+`, `-`

=== Операторы сравнения

Операторы сравнения возвращают boolean результат:

* **Равенство (==)** - проверяет равенство значений
* **Неравенство (!=)** - проверяет неравенство значений
* **Больше (>)** - первый операнд больше второго
* **Больше или равно (>=)** - первый операнд больше или равен второму
* **Меньше (<)** - первый операнд меньше второго
* **Меньше или равно (<=)** - первый операнд меньше или равен второму

**Важные особенности:**

* Сравнение примитивных типов происходит по значению
* При сравнении разных числовых типов происходит автоматическое приведение
* Сравнение чисел с плавающей точкой требует осторожности из-за проблем точности

=== Логические операторы

Логические операторы работают с boolean значениями:

* **Логическое И (&&)** - возвращает true, если оба операнда true (с коротким замыканием)
* **Логическое ИЛИ (||)** - возвращает true, если хотя бы один операнд true (с коротким замыканием)
* **Логическое НЕ (!)** - инвертирует boolean значение
* **Логическое исключающее ИЛИ (^)** - возвращает true, если операнды различны

**Короткое замыкание (Short-Circuit Evaluation):**

* `&&` - если первый операнд false, второй не вычисляется
* `||` - если первый операнд true, второй не вычисляется

=== Конструкция if-else

Основная конструкция для принятия решений в Java:

[source,java]
----
if (условие) {
    // выполняется, если условие true
} else if (другое_условие) {
    // выполняется, если другое_условие true
} else {
    // выполняется, если все условия false
}
----

**Особенности:**

* Условие должно быть boolean выражением
* Фигурные скобки обязательны для блоков из нескольких инструкций
* Для одной инструкции скобки опциональны, но рекомендуются

=== Конструкция switch

Альтернатива множественным if-else для сравнения одного значения с константами:

[source,java]
----
switch (переменная) {
    case значение1:
        // код
        break;
    case значение2:
        // код
        break;
    default:
        // код по умолчанию
}
----

**Особенности:**

* Работает с byte, short, int, char, String, enum
* `break` обязателен для предотвращения "проваливания"
* `default` - опциональная секция для всех остальных случаев

=== Тернарный оператор

Сокращенная форма if-else для простых случаев:

[source,java]
----
результат = условие ? значение_если_true : значение_если_false;
----

== Примеры кода

=== Пример 1: Арифметические операторы

Класс `ArithmeticOperatorsDemo` демонстрирует работу с арифметическими операторами:

[source,java]
----
include::../../src/com/ru/oca/operators/ArithmeticOperatorsDemo.java[]
----

**Ключевые аспекты:**

* Различия между целочисленным делением и делением с плавающей точкой
* Поведение оператора остатка с отрицательными числами
* Приоритет операторов и использование скобок для изменения порядка вычислений
* Унарные операторы и их влияние на значения

=== Пример 2: Конструкции принятия решений

Класс `DecisionConstructsDemo` показывает различные способы принятия решений:

[source,java]
----
include::../../src/com/ru/oca/operators/DecisionConstructsDemo.java[]
----

**Ключевые аспекты:**

* Различные формы конструкции if-else
* Правильное использование конструкции switch с break
* Тернарный оператор для простых условных присваиваний
* Вложенные условные конструкции

=== Пример 3: Логические операторы

Класс `LogicalOperatorsDemo` демонстрирует работу логических операторов:

[source,java]
----
include::../../src/com/ru/oca/operators/LogicalOperatorsDemo.java[]
----

**Ключевые аспекты:**

* Операторы сравнения для различных типов данных
* Логические операторы и короткое замыкание
* Особенности сравнения чисел с плавающей точкой
* Побитовые логические операторы

== Примеры вопросов

=== Вопрос 1
Что будет выведено следующим кодом?
[source,java]
----
int x = 15;
int y = 4;
System.out.println(x / y + " " + x % y);
----

* A) 3 3 ✓ ПРАВИЛЬНО
* B) 3.75 3 ❌ НЕВЕРНО
* C) 3 3.0 ❌ НЕВЕРНО
* D) 4 3 ❌ НЕВЕРНО

*Правильный ответ:* A
*Объяснение:* При целочисленном делении 15/4 = 3 (дробная часть отбрасывается), остаток от деления 15%4 = 3.

=== Вопрос 2
Что будет результатом выражения `true && false || true`?

* A) false ❌ НЕВЕРНО
* B) true ✓ ПРАВИЛЬНО
* C) Ошибка компиляции ❌ НЕВЕРНО
* D) Зависит от контекста ❌ НЕВЕРНО

*Правильный ответ:* B
*Объяснение:* Сначала выполняется `true && false` = false, затем `false || true` = true. Оператор && имеет более высокий приоритет чем ||.

=== Вопрос 3
Какой результат у следующего switch-case?
[source,java]
----
int day = 2;
switch(day) {
    case 1: System.out.print("Mon");
    case 2: System.out.print("Tue");
    case 3: System.out.print("Wed");
    default: System.out.print("Other");
}
----

* A) Tue ❌ НЕВЕРНО
* B) TueWed ❌ НЕВЕРНО
* C) TueWedOther ✓ ПРАВИЛЬНО
* D) Other ❌ НЕВЕРНО

*Правильный ответ:* C
*Объяснение:* Отсутствие break приводит к "проваливанию" через все последующие case и default.

== Типичные ошибки

=== Ошибка 1: Путаница с целочисленным делением

**Проблема:** Ожидание результата с плавающей точкой при делении целых чисел.
[source,java]
----
int result = 5 / 2; // result = 2, а не 2.5
----

**Решение:** Использовать явное приведение к double или работать с double значениями:
[source,java]
----
double result = (double) 5 / 2; // result = 2.5
----

=== Ошибка 2: Забывание break в switch

**Проблема:** Неожиданное "проваливание" через case блоки без break.
[source,java]
----
switch(value) {
    case 1: doSomething(); // Забыли break!
    case 2: doSomethingElse(); // Выполнится и это тоже!
}
----

**Решение:** Всегда использовать break, кроме случаев намеренного проваливания.

=== Ошибка 3: Неправильная проверка равенства float/double

**Проблема:** Прямое сравнение чисел с плавающей точкой может дать неожиданный результат.
[source,java]
----
double result = 0.1 + 0.2;
if (result == 0.3) { /* Может не выполниться! */ }
----

**Решение:** Использовать сравнение с допустимой погрешностью (epsilon).

== Связанные API

* `Math` класс - математические функции и константы
* `Integer`, `Double` классы - обертки для примитивных типов
* `Boolean` класс - обертка для boolean типа

== Связанные темы

* xref:../oo-concepts/index.adoc[OO Concepts]
* xref:../java-data-types/index.adoc[Working with Java Data Types]
* xref:../constructors/index.adoc[Constructors]
* xref:../methods/index.adoc[Working with Methods]
