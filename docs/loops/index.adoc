= Using Loop Constructs
:toc:
:toc-title: Содержание
:toclevels: 3

== Назначение

Тема "Using Loop Constructs" является критически важной для экзамена OCA Java SE 8 и фундаментальной для написания эффективного кода.
Циклы позволяют многократно выполнять блоки кода, что является основой для обработки коллекций данных, реализации алгоритмов и автоматизации повторяющихся операций.
Понимание различий между типами циклов, управляющих операторов и особенностей их работы необходимо для успешной сдачи экзамена и профессиональной разработки.

== Теория

=== Цикл for

Цикл `for` - это наиболее распространенная конструкция для выполнения повторяющихся операций определенное количество раз.

**Синтаксис:**
[source,java]
----
for (initialization; condition; update) {
    // тело цикла
}
----

**Компоненты цикла for:**

* `initialization` - инициализация переменной счетчика (выполняется один раз)
* `condition` - условие продолжения цикла (проверяется перед каждой итерацией)
* `update` - изменение переменной счетчика (выполняется после каждой итерации)

**Особенности:**

* Все три части опциональны, но точки с запятой обязательны
* Переменная может быть объявлена в инициализации и будет видна только в цикле
* Множественные переменные могут быть объявлены в инициализации

=== Расширенный цикл for (for-each)

Упрощенная форма цикла для перебора элементов массивов и коллекций.

**Синтаксис:**
[source,java]
----
for (ElementType element : collection) {
    // тело цикла
}
----

**Преимущества:**

* Более читаемый код
* Невозможны ошибки с индексами
* Автоматическая обработка границ
* Работает с массивами и Iterable коллекциями

**Ограничения:**

* Только для чтения элементов (не для модификации)
* Нет доступа к индексу элемента
* Перебор только в прямом порядке

=== Цикл while

Цикл `while` выполняется до тех пор, пока условие истинно. Проверка условия происходит перед каждой итерацией.

**Синтаксис:**
[source,java]
----
while (condition) {
    // тело цикла
}
----

**Особенности:**

* Условие проверяется перед первой итерацией
* Если условие ложно изначально, тело цикла не выполнится ни разу
* Часто используется когда количество итераций заранее неизвестно
* Важно обновлять переменные в теле цикла для избежания бесконечного цикла

=== Цикл do-while

Цикл `do-while` гарантирует выполнение тела цикла хотя бы один раз, так как условие проверяется после выполнения тела цикла.

**Синтаксис:**
[source,java]
----
do {
    // тело цикла
} while (condition);
----

**Особенности:**

* Тело цикла выполняется минимум один раз
* Условие проверяется после каждой итерации
* Полезен для меню, валидации ввода пользователя
* Обязательная точка с запятой после условия

=== Управляющие операторы

**break:**

* Немедленно завершает выполнение цикла
* Переходит к первому оператору после цикла
* Может использоваться с метками для выхода из вложенных циклов

**continue:**

* Пропускает оставшуюся часть текущей итерации
* Переходит к следующей итерации цикла
* В for переходит к части update, в while/do-while к проверке условия

**Метки (labels):**

* Позволяют break и continue воздействовать на внешние циклы
* Синтаксис: `labelName: for(...)`
* Используются `break labelName;` и `continue labelName;`

=== Вложенные циклы

Циклы могут быть вложены друг в друга для обработки многомерных структур данных.

**Особенности:**

* Внутренний цикл выполняется полностью на каждой итерации внешнего
* break/continue воздействуют только на ближайший цикл
* Для воздействия на внешние циклы используются метки
* Важно следить за производительностью при глубокой вложенности

== Примеры кода

=== Пример 1: Демонстрация всех видов циклов

Класс демонстрирует основные циклы и их особенности:

[source,java]
----
// Будет создан файл BasicLoopsDemo.java
----

**Ключевые аспекты:**

* Различия между for, while, do-while
* Особенности enhanced for loop
* Правильное использование каждого типа цикла
* Практические примеры применения

=== Пример 2: Управляющие операторы и метки

Демонстрация break, continue и labeled statements:

[source,java]
----
// Будет создан файл LoopControlDemo.java
----

**Ключевые аспекты:**

* Использование break для выхода из циклов
* continue для пропуска итераций
* Метки для управления вложенными циклами
* Практические сценарии применения

=== Пример 3: Вложенные циклы и алгоритмы

Примеры работы с многомерными структурами и алгоритмами:

[source,java]
----
// Будет создан файл NestedLoopsDemo.java
----

**Ключевые аспекты:**

* Обработка двумерных массивов
* Алгоритмы поиска и сортировки
* Оптимизация вложенных циклов
* Практические применения

== Примеры вопросов

=== Вопрос 1
Что будет выведено при выполнении следующего кода?

[source,java]
----
for (int i = 0; i < 3; i++) {
    for (int j = 0; j < 2; j++) {
        if (i == 1 && j == 1) continue;
        System.out.print(i + "" + j + " ");
    }
}
----

* A) 00 01 10 20 21
* B) 00 01 10 11 20 21 ❌ НЕВЕРНО
* C) 00 01 20 21 ❌ НЕВЕРНО
* D) 00 10 11 20 21 ❌ НЕВЕРНО

*Правильный ответ:* A

*Объяснение:* continue пропускает итерацию с i=1, j=1, поэтому "11" не выводится. Остальные комбинации выводятся: 00 01 10 20 21.

=== Вопрос 2
Какой цикл гарантированно выполнится хотя бы один раз?

* A) for ❌ НЕВЕРНО
* B) while ❌ НЕВЕРНО
* C) do-while
* D) enhanced for ❌ НЕВЕРНО

*Правильный ответ:* C

*Объяснение:* do-while проверяет условие после выполнения тела цикла, поэтому тело выполнится минимум один раз, даже если условие ложно.

=== Вопрос 3
Что произойдет при выполнении кода?

[source,java]
----
int[] arr = {1, 2, 3};
for (int x : arr) {
    x = x * 2;
}
System.out.println(Arrays.toString(arr));
----

* A) [2, 4, 6] ❌ НЕВЕРНО
* B) [1, 2, 3]
* C) Ошибка компиляции ❌ НЕВЕРНО
* D) Исключение во время выполнения ❌ НЕВЕРНО

*Правильный ответ:* B

*Объяснение:* Enhanced for создает копию элемента в переменной x. Изменение x не влияет на исходный массив.

== Типичные ошибки

=== Ошибка 1: Бесконечные циклы

**Проблема:** Забывание обновить переменную условия в цикле:
[source,java]
----
int i = 0;
while (i < 10) {
    System.out.println(i);
    // Забыли i++; - бесконечный цикл!
}
----

**Решение:** Всегда обновляйте переменные условия:
[source,java]
----
int i = 0;
while (i < 10) {
    System.out.println(i);
    i++; // Обязательное обновление
}
----

=== Ошибка 2: Неправильное использование break/continue во вложенных циклах

**Проблема:** break/continue влияют только на ближайший цикл:
[source,java]
----
for (int i = 0; i < 3; i++) {
    for (int j = 0; j < 3; j++) {
        if (condition) break; // Выход только из внутреннего цикла
    }
}
----

**Решение:** Используйте метки для управления внешними циклами:
[source,java]
----
outer: for (int i = 0; i < 3; i++) {
    for (int j = 0; j < 3; j++) {
        if (condition) break outer; // Выход из внешнего цикла
    }
}
----

=== Ошибка 3: Попытка модификации коллекции в enhanced for

**Проблема:** Изменение размера коллекции во время итерации:
[source,java]
----
List<String> list = new ArrayList<>();
for (String item : list) {
    list.remove(item); // ConcurrentModificationException!
}
----

**Решение:** Используйте итератор или обычный for в обратном порядке:
[source,java]
----
for (int i = list.size() - 1; i >= 0; i--) {
    list.remove(i); // Безопасное удаление
}
----

=== Ошибка 4: Неправильная область видимости переменных цикла

**Проблема:** Попытка использовать переменную цикла за его пределами:
[source,java]
----
for (int i = 0; i < 10; i++) {
    // цикл
}
System.out.println(i); // ОШИБКА! i не доступна
----

**Решение:** Объявляйте переменную до цикла или используйте внутри цикла:
[source,java]
----
int i;
for (i = 0; i < 10; i++) {
    // цикл
}
System.out.println(i); // OK, i доступна
----

== Связанные API

* **Enhanced for loop** - работает с массивами и Iterable коллекциями
* **java.util.Iterator** - интерфейс для безопасной итерации по коллекциям
* **java.lang.Iterable** - базовый интерфейс для объектов, поддерживающих enhanced for
* **Arrays.toString()** - полезен для отладки циклов с массивами
* **Collections Framework** - ArrayList, LinkedList и другие коллекции в циклах

== Связанные темы

* xref:../arrays/index.adoc[Creating and Using Arrays]
* xref:../operators/index.adoc[Using Operators and Decision Constructs]
* xref:../java-data-types/index.adoc[Working with Java Data Types]
* xref:../methods/index.adoc[Working with Methods]
* xref:../arraylist/index[Working with Java API - ArrayList]
